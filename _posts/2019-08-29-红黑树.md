---
layout:     post
title:      红黑树
subtitle:   红黑树
date:       2019-08-29
author:     正版慕言
header-img: img/blog_bg_1.jpg
catalog: true
mathjax: true
tags:
    - 红黑树
    - 数据结构

---

> 红黑树(Red Black Tree)是一种自平衡的二叉查找树。

# 红黑树的特性

除了符合二叉查找树的基本特性之外，红黑树的特性有：

1. 节点是红色或黑色的
2. 根节点是黑色的
3. 每个叶子节点都是黑色的空节点
4. 每个红色节点的两个子节点都是黑色的
5. 从任一节点到它每个叶子节点的所有路径都包含相同数目的黑色节点

![红黑树](/img/Journal/DataStruct/红黑树.jpeg)

红黑树从根节点到叶子节点的最长路径不会超过最短路径的2倍。它的平衡性要求比AVL树低，是一种弱平衡二叉树。

当插入删除节点的时候，红黑树的规则可能被打破。这时候，就需要做出一些调整来维持规则。

一棵含有n个节点的红黑树的高度不超过$2log(n+1)$。

高度为h的共黑树，它包含的内节点个数至少为$2^{bh(x)}-1 $个。

我们把黑色节点的个数记为$bh(x)$。对一棵红黑树来说，$bh(x) $是唯一的，且$bh(x) >= \frac{h}{2} $。

红黑树的操作：

# 红黑树的插入

在进行插入操作时，我们设定插入的节点颜色为红色。因为如果插入的是黑色节点，就违背了第5条特性。

插入节点分为以下情况：

### 插入节点的父节点为黑色节点

这样的情况不破坏红黑树特性，因此直接插入即可。

![黑父](/img/Journal/DataStruct/黑父.png)

### 插入节点的父节点为红色节点

此时又分为两种情况：

##### 插入节点的叔节点为红色

此时只要修改父节点和叔节点的颜色为黑色，将祖父节点修改为红色。并递归的检查祖节点。

![红叔](/img/Journal/DataStruct/红叔.png)

##### 插入节点的叔节点为黑色

此时不能通过修改节点的颜色来达到平衡的效果。

会出现$LL, LR, RR, RL$4种插入情况，这四种情况的旋转和AVL树的旋转方法一样，但要在旋转之后需要改变节点的颜色，让旋转后的根节点为黑色，根节点的两个子节点为红色，被旋转到最下方的叔节点不用改变。

1. LL: 先右旋，然后改变节点的颜色
![LL](/img/Journal/DataStruct/LL.png)
2. LR: 先左旋，再右旋，最后改变节点的颜色
![LR](/img/Journal/DataStruct/LR.png)
3. RR: 先左旋，然后改变节点的颜色
![RR](/img/Journal/DataStruct/RR.png)
4. RL: 先右旋，再左旋，最后改变节点的颜色
![RL](/img/Journal/DataStruct/RL.png)

